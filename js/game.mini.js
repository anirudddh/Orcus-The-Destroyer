window.addEventListener("load",function(){var a={};a.playState=0;a.score=0;a.key={left:37,up:38,right:39,down:40,w:87,a:65,s:83,d:68,space:32};a.pressedKeys=[];a.bullet=[];a.enemies=[];a.enemiesDestroyed=0;a.difficulty=0;a.canvas=document.getElementById("gameCanvas");a.canvas.width=800;a.canvas.height=500;a.ctx=a.canvas.getContext("2d");a.clamp=function(d,c,b){if(d>b){d=b}if(d<c){d=c}return d};a.init=function(){a.ctx.font="32px Arial";a.ctx.fillStyle="#FFFFFF";a.ctx.fillText("PRESS SPACEBAR TO START THE GAME",100,100);a.ctx.fillText("MOVE WITH ARROW KEYS",180,200);a.ctx.fillText("SHOOT IN 4 DIRECTION WITH WASD",120,300);a.ctx.fillText("GOOD LUCK!",290,400)};a.start=function(){a.playState=1;a.loop=setInterval(function(){a.draw();a.update()},30);a.difficultyLoop=setInterval(function(){a.difficulty+=1;var b=document.getElementById("difficulty").innerHTML=a.difficulty},13000);a.enemyLoop=setInterval(function(){for(var b=a.difficulty;b>=0;b--){a.enemies.push(a.createEnemies())}},2000)};a.reset=function(){clearInterval(a.loop);clearInterval(a.enemyLoop);clearInterval(a.difficultyLoop);a.playState=0;a.player.x=320;a.player.y=240;a.player.shield=50;a.bullet=[];a.enemies=[];a.enemiesDestroyed=0;a.difficulty=0;a.score=0;var c=document.getElementById("shield").innerHTML=a.player.shield;var b=document.getElementById("difficulty").innerHTML=a.difficulty;var d=document.getElementById("score").innerHTML=a.score};a.draw=function(){a.ctx.clearRect(0,0,a.canvas.width,a.canvas.height);a.background();a.player.draw();for(var b=a.bullet.length-1;b>=0;b--){a.bullet[b].draw()}for(var b=a.enemies.length-1;b>=0;b--){a.enemies[b].draw()}};a.update=function(){if(a.pressedKeys[a.key.w]){setTimeout(function(){a.bullet.push(a.createBullet(a.player.shootFromX(),a.player.shootFromY(),0,-1))},500);a.pressedKeys[a.key.a]=false;a.pressedKeys[a.key.s]=false;a.pressedKeys[a.key.d]=false}if(a.pressedKeys[a.key.a]){setTimeout(function(){a.bullet.push(a.createBullet(a.player.shootFromX(),a.player.shootFromY(),-1,0))},500);a.pressedKeys[a.key.w]=false;a.pressedKeys[a.key.s]=false;a.pressedKeys[a.key.d]=false}if(a.pressedKeys[a.key.s]){setTimeout(function(){a.bullet.push(a.createBullet(a.player.shootFromX(),a.player.shootFromY(),0,1))},500);a.pressedKeys[a.key.a]=false;a.pressedKeys[a.key.w]=false;a.pressedKeys[a.key.d]=false}if(a.pressedKeys[a.key.d]){setTimeout(function(){a.bullet.push(a.createBullet(a.player.shootFromX(),a.player.shootFromY(),1,0))},500);a.pressedKeys[a.key.a]=false;a.pressedKeys[a.key.s]=false;a.pressedKeys[a.key.w]=false}if(a.pressedKeys[a.key.left]){a.player.x-=a.player.xVelocity}if(a.pressedKeys[a.key.up]){a.player.y-=a.player.yVelocity}if(a.pressedKeys[a.key.right]){a.player.x+=a.player.xVelocity}if(a.pressedKeys[a.key.down]){a.player.y+=a.player.yVelocity}if(a.player.x<=10||a.player.x+a.player.width>=a.canvas.width-10||a.player.y<=10||a.player.y+a.player.height>=a.canvas.height-10){a.player.shield-=1;a.player.checkShield()}a.player.x=a.clamp(a.player.x,10,a.canvas.width-a.player.width-10);a.player.y=a.clamp(a.player.y,10,a.canvas.height-a.player.height-10);for(var c=a.bullet.length-1;c>=0;c--){a.bullet[c].update();if(a.bullet[c].active===false){a.bullet.splice(c,1)}}for(var c=a.enemies.length-1;c>=0;c--){a.enemies[c].update();if(a.enemies[c].active===false){a.enemies.splice(c,1)}}for(var c=a.bullet.length-1;c>=0;c--){for(var b=a.enemies.length-1;b>=0;b--){if(a.bullet[c].x<a.enemies[b].x+a.enemies[b].width&&a.bullet[c].x+a.bullet[c].width>a.enemies[b].x&&a.bullet[c].y<a.enemies[b].y+a.enemies[b].height&&a.bullet[c].y+a.bullet[c].height>a.enemies[b].y){a.enemies[b].explosion()}}}for(var c=a.enemies.length-1;c>=0;c--){if(a.enemies[c].x<a.player.x+a.player.width&&a.enemies[c].x+a.enemies[c].width>a.player.x&&a.enemies[c].y<a.player.y+a.player.height&&a.enemies[c].y+a.enemies[c].height>a.player.y){a.player.checkShield();a.enemies[c].explosion()}}};a.background=function(){a.ctx.fillStyle="#000000";a.ctx.fillRect(0,0,a.canvas.width,a.canvas.height);a.ctx.rect(5,5,a.canvas.width-10,a.canvas.height-10);a.ctx.strokeStyle="#7DE0FF";a.ctx.stroke();for(var b=Math.random()*500;b>=0;b--){a.ctx.beginPath();a.ctx.arc(Math.random()*800,Math.random()*500,Math.random()*1.1,0,Math.PI*2);a.ctx.fillStyle="#FEFEFE";a.ctx.fill();a.ctx.closePath()}};a.player={x:320,y:240,xVelocity:8,yVelocity:8,width:30,height:30,shield:50,image:function(){var b=new Image();b.src="img/ship.gif";return b},draw:function(){a.ctx.drawImage(a.player.image(),a.player.x,a.player.y)},shootFromX:function(){return a.player.x+a.player.width/2},shootFromY:function(){return a.player.y+a.player.height/2},checkShield:function(){if(a.player.shield<=0){a.ctx.clearRect(0,0,a.canvas.width,a.canvas.height);a.ctx.font="40px Arial";a.ctx.fillStyle="#FFFFFF";a.ctx.fillText("YOU LOSE!",300,150);a.ctx.fillText("PRESS SPACEBAR",220,220);a.ctx.fillText("TO RESTART THE GAME",170,270);a.reset()}else{a.player.shield-=1;var b=document.getElementById("shield").innerHTML=a.player.shield;a.ctx.beginPath();a.ctx.arc(a.player.x+a.player.width/2,a.player.y+a.player.height/2,35,0,Math.PI*2);a.ctx.fillStyle="rgba(54,254,253, 0.5)";a.ctx.fill();a.ctx.closePath()}}};a.createBullet=function(b,f,e,d){var c={};c.active=true;c.x=b;c.y=f;c.directionX=e;c.directionY=d;c.velocity=20;c.setWidth=function(g){if(g===0){return 4}else{return 8}};c.setHeight=function(g){if(g===0){return 4}else{return 8}};c.width=c.setWidth(c.directionX);c.height=c.setHeight(c.directionY);c.draw=function(){a.ctx.fillStyle="#FF3BDC";a.ctx.fillRect(c.x,c.y,c.width,c.height)};c.update=function(){if(c.x>=0&&c.x<=a.canvas.width&&c.y>=0&&c.y<=a.canvas.height){c.active=true}else{c.active=false}c.x+=c.velocity*c.directionX;c.y+=c.velocity*c.directionY};return c};a.createEnemies=function(){var b={};b.active=true;b.x=Math.random()*(a.canvas.width);b.y=Math.random()*(a.canvas.height);b.width=30;b.height=30;b.xVelocity=8;b.yVelocity=8;b.explosion=function(){b.active=false;a.enemiesDestroyed+=1;a.setScore();a.ctx.beginPath();a.ctx.arc(b.x,b.y,50,0,Math.PI*2);a.ctx.fillStyle="#FEFEFE";a.ctx.fill();a.ctx.stroke();a.ctx.closePath()};b.image=function(){var c=new Image();c.src="img/enemy.gif";return c};b.draw=function(){a.ctx.drawImage(b.image(),b.x,b.y)};b.update=function(){if(b.x>=a.canvas.width-b.width){b.xVelocity=b.xVelocity*-1}if(b.x<=0){b.xVelocity=b.xVelocity*-1}if(b.y>=a.canvas.height-b.height){b.yVelocity=b.yVelocity*-1}if(b.y<=0){b.yVelocity=b.yVelocity*-1}b.x+=b.xVelocity;b.y+=b.yVelocity;b.x=a.clamp(b.x,0,a.canvas.width-a.player.width);b.y=a.clamp(b.y,0,a.canvas.height-a.player.height)};return b};a.setScore=function(){a.score+=10;var b=document.getElementById("score").innerHTML=a.score};window.addEventListener("keydown",function(b){a.pressedKeys[b.which]=true;if(b.which===32){if(a.playState===0){a.start()}else{return false}}});window.addEventListener("keyup",function(b){a.pressedKeys[b.which]=false});a.init()});